<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>组件组合应用</title>
<!-- <script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
<script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
<script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script> -->
<script src='../js/babel.min.js' ></script>
<script src='../js/react.development.js' ></script>
<script src='../js/react-dom.development.js' ></script>
<script src='../js/prop-types.js'></script>
<style>
li{
    list-style-type:none;
}
</style>
</head>
<body>
<div id="example1"></div>
<div id="example2"></div>
<script type="text/babel">
/*
问题：数据保存在哪个组件内？
看数据是某个组件（给它自己）需要还是某个组件需要（给共同的父亲）
*/
//定义组件
class App extends React.Component{
    constructor(props){
            super(props)
            this.addTodo=this.addTodo.bind(this)
            this.state={
                todos:['吃饭','睡觉','打豆豆']
            }
        }
        addTodo(todo){
            const {todos}=this.state
            todos.unshift(todo)
            //更新状态
            this.setState({todos})
        }
      
         // props用来接收传的值在用这个组件的后面传值state设置状态咱们可以通过在父组件当中设置State，
        //    然后通过在子组件上使用props来接收收父组件的state值。
    render(){ 
        const {todos}=this.state
        return (
            <div>
           <h1>Simple TOO List</h1>
           <Add count={todos.length} handleAdd={this.addTodo}/>
           <List todos={this.state.todos}/>
            </div>
        )
    }
}
class Add extends React.Component{
    constructor(props){
        super(props)
        this.add=this.add.bind(this)
    }
    render(){
        return (
            <div>
          <input type="text" ref={input => this.input=input}/>
          <button onClick={this.add}>#{this.props.count+1}</button>
            </div>
        )
    }
    add(){
        //读取输入的数据
        const todo=this.input.value.trim()
        //检查合法性
        if(!todo){
            return 
        }
        //添加
        this.props.handleAdd(todo)
        this.input.value=''
        }
}
Add.propType={
    count:PropTypes.number.isReuired,
    addTodo:PropTypes.func.isReuired
}
class List extends React.Component{
    render(){
        return (
            <div>
           <ul>
          {
              this.props.todos.map((todo,index) => <li key={index}>{todo}</li>)
          }
           </ul>
            </div>
        )
    }
}
List.propType={
        todos:PropTypes.array.isRequired
    }
//渲染组件
ReactDOM.render(<App />,document.getElementById('example1'))
</script>
</body>
</html>